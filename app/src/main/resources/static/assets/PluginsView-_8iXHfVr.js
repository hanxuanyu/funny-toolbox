import{c as j,d as S,r as g,a as E,w as H,b as L,e as i,u as s,f as l,g as t,h as f,t as v,i as d,j as A,k as D,v as J,o as r,n as P,l as Q,m as G,p as K,F as I,q as X,s as Y}from"./index-DHMMyud2.js";import{g as Z,_ as C,a as B,b as N}from"./_plugin-vue_export-helper-Dj7ibWYN.js";import{_ as ee,a as te,b as se,c as ae,d as ne,g as le,R as oe,e as V}from"./DialogTitle.vue_vue_type_script_setup_true_lang-vRWaWv_l.js";import{_ as ie,a as re,b as ce,c as ue,d as de,e as fe,f as me}from"./index-CgjUB-Lw.js";const T=j("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const ve=j("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);const pe=j("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const _e=j("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const he=j("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),xe={class:"flex justify-between items-start"},ge={class:"flex-1 pr-4"},ye={class:"flex gap-2 flex-shrink-0"},be={class:"flex-1 overflow-hidden"},ke={key:0,class:"flex items-center justify-center h-[70vh] text-gray-500"},we={class:"h-full"},$e=["src","title"],Le={key:1,class:"flex items-center justify-center h-[70vh] text-gray-500"},Ce=S({__name:"PluginModal",props:{plugin:{},open:{type:Boolean}},emits:["update:open"],setup(h,{emit:o}){const c=h,p=o,_=g(!1),k=g(null),w=E({get:()=>c.open,set:x=>p("update:open",x)});H(()=>c.open,x=>{x&&m.value&&(_.value=!0)});const y=()=>{setTimeout(()=>{_.value=!1},100)},m=E(()=>{if(!c.plugin?.frontendEntry)return null;const x=Z();return c.plugin.frontendEntry.startsWith("http://")||c.plugin.frontendEntry.startsWith("https://")?c.plugin.frontendEntry:c.plugin.frontendEntry.startsWith("/")?x+c.plugin.frontendEntry:`${x}/${c.plugin.frontendEntry}`}),F=()=>{m.value&&(window.open(m.value,"_blank"),w.value=!1)};return(x,$)=>(r(),L(s(ee),{open:w.value,"onUpdate:open":$[0]||($[0]=b=>w.value=b)},{default:i(()=>[l(s(ne),{class:"sm:max-w-[90vw] lg:max-w-[1400px] max-h-[90vh] p-0 overflow-hidden gap-0"},{default:i(()=>[l(s(te),{class:"px-6 pt-4 pb-3 pr-14 border-b flex-shrink-0"},{default:i(()=>[t("div",xe,[t("div",ge,[l(s(se),null,{default:i(()=>[f(v(h.plugin?.name),1)]),_:1}),l(s(ae),null,{default:i(()=>[f(v(h.plugin?.description),1)]),_:1})]),t("div",ye,[l(s(C),{variant:"outline",size:"sm",onClick:F,title:"åœ¨æ–°çª—å£ä¸­æ‰“å¼€"},{default:i(()=>[l(s(T),{class:"h-4 w-4"})]),_:1})])])]),_:1}),t("div",be,[_.value?(r(),d("div",ke,[...$[1]||($[1]=[t("div",{class:"text-center"},[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mb-2"}),t("p",null,"åŠ è½½ä¸­...")],-1)])])):A("",!0),D(t("div",we,[m.value?(r(),d("iframe",{key:0,ref_key:"iframeRef",ref:k,src:m.value,class:"w-full h-[70vh] border-0 block",title:h.plugin?.name,onLoad:y},null,40,$e)):(r(),d("div",Le," æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢ "))],512),[[J,!_.value]])])]),_:1})]),_:1},8,["open"]))}}),Ee=B(Ce,[["__scopeId","data-v-b50eb47b"]]),We={key:0,class:"inline-block text-inherit"},je={key:2,class:"material-icons"},Fe=["innerHTML"],Me=["src","alt"],Ie={key:5,class:"inline-block"},Pe=S({__name:"PluginIcon",props:{icon:{default:""},alt:{default:"icon"},defaultIcon:{default:"ğŸ§°"}},setup(h){const o=h,c=E(()=>o.icon?o.icon.startsWith("fa:")?"fa":o.icon.startsWith("md:")?"md":o.icon.startsWith("svg:")||o.icon.startsWith("data:image/svg")?"svg":o.icon.startsWith("http://")||o.icon.startsWith("https://")||o.icon.startsWith("/")?"url":(o.icon.length<=4&&/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/u.test(o.icon),"emoji"):"default"),p=E(()=>o.icon?o.icon.startsWith("fa:")||o.icon.startsWith("md:")?o.icon.substring(3):o.icon.startsWith("svg:")?o.icon.substring(4):o.icon:o.defaultIcon);return(_,k)=>c.value==="emoji"?(r(),d("span",We,v(p.value),1)):c.value==="fa"?(r(),d("i",{key:1,class:P(p.value)},null,2)):c.value==="md"?(r(),d("i",je,v(p.value),1)):c.value==="svg"?(r(),d("span",{key:3,class:"inline-flex items-center justify-center w-16 h-16",innerHTML:p.value},null,8,Fe)):c.value==="url"?(r(),d("img",{key:4,src:p.value,alt:h.alt,class:"inline-block w-16 h-16 object-contain"},null,8,Me)):(r(),d("span",Ie,v(h.defaultIcon),1))}}),Se=B(Pe,[["__scopeId","data-v-28ad1f1f"]]),Be={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex flex-col"},ze={class:"bg-white/80 backdrop-blur-sm shadow-sm border-b sticky top-0 z-10"},Re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Ne={class:"flex justify-between items-center gap-4"},Ve={class:"flex-1 max-w-md"},Ae={class:"relative"},De={class:"flex items-center space-x-2 sm:space-x-4"},Te={class:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 w-full"},Ue={key:0,class:"flex justify-center items-center py-20"},qe={class:"text-center text-gray-500"},Oe={class:"text-lg mb-2"},He={key:0,class:"text-sm"},Je={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Qe={class:"flex items-start gap-4"},Ge={class:"flex-shrink-0 w-16 h-16 flex items-center justify-center text-5xl group-hover:scale-110 transition-transform bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg"},Ke={class:"flex-1 min-w-0"},Xe={class:"flex items-start justify-between gap-2"},Ye=["onClick","title"],Ze={class:"flex items-center gap-2 mt-2"},et={class:"mt-3 pt-3 border-t"},tt={class:"flex items-center text-xs text-gray-500"},st={class:"truncate"},at=S({__name:"PluginsView",setup(h){const o=K(),c=g([]),p=g(!1),_=g(""),k=g(!1),w=g(null),y=g(""),m=g(new Set),F=()=>{try{const a=localStorage.getItem("plugin_favorites");a&&(m.value=new Set(JSON.parse(a)))}catch(a){console.error("åŠ è½½æ”¶è—å¤±è´¥:",a)}},x=()=>{try{localStorage.setItem("plugin_favorites",JSON.stringify(Array.from(m.value)))}catch(a){console.error("ä¿å­˜æ”¶è—å¤±è´¥:",a)}},$=(a,e)=>{e.stopPropagation(),m.value.has(a)?m.value.delete(a):m.value.add(a),x()},b=a=>m.value.has(a),z=E(()=>localStorage.getItem("isAuthenticated")==="true"),M=E(()=>{const a=c.value.filter(u=>u.status==="ENABLED");let e=a;if(y.value.trim()){const u=y.value.toLowerCase();e=a.filter(n=>n.name.toLowerCase().includes(u)||n.description?.toLowerCase().includes(u)||n.author?.toLowerCase().includes(u))}return e.sort((u,n)=>{const W=b(u.id)?1:0;return(b(n.id)?1:0)-W})}),R=async()=>{p.value=!0,_.value="";try{const a=await le();c.value=a.data.data||[],console.log("åŠ è½½çš„æ’ä»¶åˆ—è¡¨:",c.value),console.log("å·²å¯ç”¨çš„æ’ä»¶:",M.value)}catch(a){_.value=a.message||"åŠ è½½æ’ä»¶åˆ—è¡¨å¤±è´¥",console.error("åŠ è½½æ’ä»¶å¤±è´¥:",a)}finally{p.value=!1}},U=a=>{if(!a.frontendEntry){alert("æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢");return}w.value=a,k.value=!0},q=a=>{if(!a.frontendEntry){alert("æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢");return}const e="";let u=a.frontendEntry;!u.startsWith("http://")&&!u.startsWith("https://")&&(u.startsWith("/")?u=e+u:u=`${e}/${u}`),window.open(u,"_blank","noopener,noreferrer")},O=a=>{switch(a){case"ENABLED":return"è¿è¡Œä¸­";case"LOADED":return"å·²åŠ è½½";case"DISABLED":return"å·²ç¦ç”¨";case"ERROR":return"é”™è¯¯";default:return a}};return Q(()=>{F(),R()}),(a,e)=>{const u=Y("router-link");return r(),d("div",Be,[t("header",ze,[t("div",Re,[t("div",Ne,[t("div",Ve,[t("div",Ae,[l(s(pe),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>y.value=n),type:"text",placeholder:"æœç´¢å·¥å…·...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[G,y.value]])])]),t("div",De,[l(s(C),{variant:"outline",size:"sm",onClick:R,title:"åˆ·æ–°"},{default:i(()=>[l(s(oe),{class:"h-4 w-4 sm:mr-2"}),e[4]||(e[4]=t("span",{class:"hidden sm:inline"},"åˆ·æ–°",-1))]),_:1}),z.value?(r(),L(s(C),{key:0,variant:"default",size:"sm",onClick:e[1]||(e[1]=n=>s(o).push("/admin"))},{default:i(()=>[l(s(_e),{class:"h-4 w-4 sm:mr-2"}),e[5]||(e[5]=t("span",{class:"hidden sm:inline"},"ç®¡ç†åå°",-1))]),_:1})):(r(),L(s(C),{key:1,variant:"outline",size:"sm",onClick:e[2]||(e[2]=n=>s(o).push("/login"))},{default:i(()=>[...e[6]||(e[6]=[f(" ç™»å½• ",-1)])]),_:1}))])])])]),t("main",Te,[p.value?(r(),d("div",Ue,[...e[7]||(e[7]=[t("div",{class:"text-gray-500"},"åŠ è½½ä¸­...",-1)])])):_.value?(r(),L(s(ie),{key:1,variant:"destructive",class:"max-w-2xl mx-auto mb-8"},{default:i(()=>[l(s(re),null,{default:i(()=>[f(v(_.value),1)]),_:1})]),_:1})):M.value.length===0?(r(),L(s(N),{key:2,class:"max-w-2xl mx-auto p-12"},{default:i(()=>[t("div",qe,[t("p",Oe,v(y.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å·¥å…·":"æš‚æ— å¯ç”¨çš„æ’ä»¶"),1),y.value?A("",!0):(r(),d("p",He,[z.value?(r(),d(I,{key:0},[e[9]||(e[9]=f(" è¯·å‰å¾€",-1)),l(u,{to:"/admin",class:"text-blue-600 hover:underline"},{default:i(()=>[...e[8]||(e[8]=[f("ç®¡ç†åå°",-1)])]),_:1}),e[10]||(e[10]=f("ä¸Šä¼ æ’ä»¶ ",-1))],64)):(r(),d(I,{key:1},[f(" è¯·è”ç³»ç®¡ç†å‘˜ä¸Šä¼ æ’ä»¶ ")],64))]))])]),_:1})):(r(),d("div",Je,[(r(!0),d(I,null,X(M.value,n=>(r(),L(s(N),{key:n.id,class:"group hover:shadow-xl transition-all duration-300 overflow-hidden border-2 hover:border-blue-200"},{default:i(()=>[l(s(ce),{class:"pb-3"},{default:i(()=>[t("div",Qe,[t("div",Ge,[l(Se,{icon:n.icon,alt:n.name},null,8,["icon","alt"])]),t("div",Ke,[t("div",Xe,[l(s(ue),{class:"text-lg font-semibold group-hover:text-blue-600 transition-colors line-clamp-2 leading-tight"},{default:i(()=>[f(v(n.name),1)]),_:2},1024),t("button",{onClick:W=>$(n.id,W),class:P(["flex-shrink-0 p-1 rounded-full transition-all duration-200 hover:bg-gray-100",b(n.id)?"text-yellow-500":"text-gray-400 hover:text-yellow-500"]),title:b(n.id)?"å–æ¶ˆæ”¶è—":"æ”¶è—"},[l(s(he),{class:P([b(n.id)?"fill-current":"","h-4 w-4"])},null,8,["class"])],10,Ye)]),t("div",Ze,[l(s(V),{variant:"outline",class:"text-xs"},{default:i(()=>[f(" v"+v(n.version),1)]),_:2},1024),l(s(V),{variant:"default",class:"text-xs"},{default:i(()=>[f(v(O(n.status)),1)]),_:2},1024)])])])]),_:2},1024),l(s(de),{class:"pb-3"},{default:i(()=>[l(s(fe),{class:"line-clamp-3 text-sm min-h-[3.6rem]"},{default:i(()=>[f(v(n.description||"æš‚æ— æè¿°"),1)]),_:2},1024),t("div",et,[t("div",tt,[t("span",st,"ä½œè€…: "+v(n.author),1)])])]),_:2},1024),l(s(me),{class:"pt-0 pb-4 flex gap-2"},{default:i(()=>[l(s(C),{variant:"default",size:"sm",class:"flex-1",onClick:W=>U(n),title:"åœ¨å¼¹çª—ä¸­æ‰“å¼€"},{default:i(()=>[l(s(ve),{class:"h-3.5 w-3.5 mr-1.5"}),e[11]||(e[11]=f(" å¼¹çª— ",-1))]),_:1},8,["onClick"]),l(s(C),{variant:"outline",size:"sm",class:"flex-1",onClick:W=>q(n),title:"åœ¨æ–°çª—å£ä¸­æ‰“å¼€"},{default:i(()=>[l(s(T),{class:"h-3.5 w-3.5 mr-1.5"}),e[12]||(e[12]=f(" æ–°çª—å£ ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]))]),l(Ee,{open:k.value,"onUpdate:open":e[3]||(e[3]=n=>k.value=n),plugin:w.value},null,8,["open","plugin"]),e[13]||(e[13]=t("footer",{class:"mt-auto py-8 border-t bg-white/50 backdrop-blur-sm flex-shrink-0"},[t("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[t("div",{class:"text-center text-sm text-gray-500"},[t("p",null,"Â© 2025 Funny Toolbox. ä¸€ä¸ªå¯æ‰©å±•çš„å·¥å…·å¹³å°.")])])],-1))])}}}),ct=B(at,[["__scopeId","data-v-7175a9c0"]]);export{ct as default};
