import{c as F,d as P,r as x,a as E,w as H,b as L,e as r,u as a,f as n,g as e,h as d,t as v,i as u,j as T,k as V,v as J,o as i,n as I,l as Q,m as G,F as M,p as K,q as X}from"./index-BA3lOLYb.js";import{g as Y,_ as C,a as S,b as R}from"./_plugin-vue_export-helper-Bq1scCNV.js";import{_ as Z,a as ee,b as te,c as se,d as ae,g as le,R as ne,e as N}from"./DialogTitle.vue_vue_type_script_setup_true_lang-RCezkXg6.js";import{_ as oe,a as re,b as ie,c as ce,d as ue,e as de,f as fe}from"./index-BmRzoQIY.js";const A=F("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const ve=F("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);const me=F("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const he=F("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const pe=F("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),ge={class:"flex justify-between items-start"},be={class:"flex-1 pr-4"},xe={class:"flex gap-2 flex-shrink-0"},_e={class:"flex-1 overflow-hidden"},ye={key:0,class:"flex items-center justify-center h-[70vh] text-gray-500"},we={class:"h-full"},ke=["src","title"],$e={key:1,class:"flex items-center justify-center h-[70vh] text-gray-500"},Le=P({__name:"PluginModal",props:{plugin:{},open:{type:Boolean}},emits:["update:open"],setup(p,{emit:o}){const c=p,m=o,h=x(!1),w=x(null),k=E({get:()=>c.open,set:g=>m("update:open",g)});H(()=>c.open,g=>{g&&f.value&&(h.value=!0)});const _=()=>{setTimeout(()=>{h.value=!1},100)},f=E(()=>{if(!c.plugin?.frontendEntry)return null;const g=Y();return c.plugin.frontendEntry.startsWith("http://")||c.plugin.frontendEntry.startsWith("https://")?c.plugin.frontendEntry:c.plugin.frontendEntry.startsWith("/")?g+c.plugin.frontendEntry:`${g}/${c.plugin.frontendEntry}`}),W=()=>{f.value&&(window.open(f.value,"_blank"),k.value=!1)};return(g,$)=>(i(),L(a(Z),{open:k.value,"onUpdate:open":$[0]||($[0]=y=>k.value=y)},{default:r(()=>[n(a(ae),{class:"sm:max-w-[90vw] lg:max-w-[1400px] max-h-[90vh] p-0 overflow-hidden gap-0"},{default:r(()=>[n(a(ee),{class:"px-6 pt-4 pb-3 pr-14 border-b flex-shrink-0"},{default:r(()=>[e("div",ge,[e("div",be,[n(a(te),null,{default:r(()=>[d(v(p.plugin?.name),1)]),_:1}),n(a(se),null,{default:r(()=>[d(v(p.plugin?.description),1)]),_:1})]),e("div",xe,[n(a(C),{variant:"outline",size:"sm",onClick:W,title:"åœ¨æ–°çª—å£ä¸­æ‰“å¼€"},{default:r(()=>[n(a(A),{class:"h-4 w-4"})]),_:1})])])]),_:1}),e("div",_e,[h.value?(i(),u("div",ye,[...$[1]||($[1]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mb-2"}),e("p",null,"åŠ è½½ä¸­...")],-1)])])):T("",!0),V(e("div",we,[f.value?(i(),u("iframe",{key:0,ref_key:"iframeRef",ref:w,src:f.value,class:"w-full h-[70vh] border-0 block",title:p.plugin?.name,onLoad:_},null,40,ke)):(i(),u("div",$e," æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢ "))],512),[[J,!h.value]])])]),_:1})]),_:1},8,["open"]))}}),Ce=S(Le,[["__scopeId","data-v-b50eb47b"]]),Ee={key:0,class:"inline-block text-inherit"},Fe={key:2,class:"material-icons"},We=["innerHTML"],je=["src","alt"],Me={key:5,class:"inline-block"},Ie=P({__name:"PluginIcon",props:{icon:{default:""},alt:{default:"icon"},defaultIcon:{default:"ðŸ§°"}},setup(p){const o=p,c=E(()=>o.icon?o.icon.startsWith("fa:")?"fa":o.icon.startsWith("md:")?"md":o.icon.startsWith("svg:")||o.icon.startsWith("data:image/svg")?"svg":o.icon.startsWith("http://")||o.icon.startsWith("https://")||o.icon.startsWith("/")?"url":(o.icon.length<=4&&/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/u.test(o.icon),"emoji"):"default"),m=E(()=>o.icon?o.icon.startsWith("fa:")||o.icon.startsWith("md:")?o.icon.substring(3):o.icon.startsWith("svg:")?o.icon.substring(4):o.icon:o.defaultIcon);return(h,w)=>c.value==="emoji"?(i(),u("span",Ee,v(m.value),1)):c.value==="fa"?(i(),u("i",{key:1,class:I(m.value)},null,2)):c.value==="md"?(i(),u("i",Fe,v(m.value),1)):c.value==="svg"?(i(),u("span",{key:3,class:"inline-flex items-center justify-center w-16 h-16",innerHTML:m.value},null,8,We)):c.value==="url"?(i(),u("img",{key:4,src:m.value,alt:p.alt,class:"inline-block w-16 h-16 object-contain"},null,8,je)):(i(),u("span",Me,v(p.defaultIcon),1))}}),Pe=S(Ie,[["__scopeId","data-v-28ad1f1f"]]),Se={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex flex-col relative overflow-hidden"},ze={class:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 w-full relative z-10"},Be={class:"max-w-2xl mx-auto mb-12"},Re={class:"relative group"},Ne={key:0,class:"flex justify-center items-center py-20"},Te={class:"text-center text-gray-500"},Ve={class:"text-lg mb-2"},Ae={key:0,class:"text-sm"},De={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Ue={class:"flex items-start gap-4"},qe={class:"flex-shrink-0 w-16 h-16 flex items-center justify-center text-5xl group-hover:scale-110 transition-transform bg-gradient-to-br from-blue-100/80 to-indigo-100/80 backdrop-blur-sm rounded-xl shadow-inner"},Oe={class:"flex-1 min-w-0"},He={class:"flex items-start justify-between gap-2"},Je=["onClick","title"],Qe={class:"flex items-center gap-2 mt-2"},Ge={class:"mt-3 pt-3 border-t border-gray-200/50"},Ke={class:"flex items-center text-xs text-gray-500"},Xe={class:"truncate"},Ye={class:"mt-auto py-6 border-t border-white/30 bg-white/40 backdrop-blur-md flex-shrink-0 relative z-10 shadow-lg"},Ze={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},et={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},tt={class:"flex items-center gap-3"},st=P({__name:"PluginsView",setup(p){const o=X(),c=x([]),m=x(!1),h=x(""),w=x(!1),k=x(null),_=x(""),f=x(new Set),W=()=>{try{const l=localStorage.getItem("plugin_favorites");l&&(f.value=new Set(JSON.parse(l)))}catch(l){console.error("åŠ è½½æ”¶è—å¤±è´¥:",l)}},g=()=>{try{localStorage.setItem("plugin_favorites",JSON.stringify(Array.from(f.value)))}catch(l){console.error("ä¿å­˜æ”¶è—å¤±è´¥:",l)}},$=(l,s)=>{s.stopPropagation(),f.value.has(l)?f.value.delete(l):f.value.add(l),g()},y=l=>f.value.has(l),z=E(()=>localStorage.getItem("isAuthenticated")==="true"),j=E(()=>{const l=c.value.filter(t=>t.status==="ENABLED");let s=l;if(_.value.trim()){const t=_.value.toLowerCase();s=l.filter(b=>b.name.toLowerCase().includes(t)||b.description?.toLowerCase().includes(t)||b.author?.toLowerCase().includes(t))}return s.sort((t,b)=>{const O=y(t.id)?1:0;return(y(b.id)?1:0)-O})}),B=async()=>{m.value=!0,h.value="";try{const l=await le();c.value=l.data.data||[],console.log("åŠ è½½çš„æ’ä»¶åˆ—è¡¨:",c.value),console.log("å·²å¯ç”¨çš„æ’ä»¶:",j.value)}catch(l){h.value=l.message||"åŠ è½½æ’ä»¶åˆ—è¡¨å¤±è´¥",console.error("åŠ è½½æ’ä»¶å¤±è´¥:",l)}finally{m.value=!1}},D=l=>{if(!l.frontendEntry){alert("æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢");return}k.value=l,w.value=!0},U=l=>{if(!l.frontendEntry){alert("æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢");return}const s="";let t=l.frontendEntry;!t.startsWith("http://")&&!t.startsWith("https://")&&(t.startsWith("/")?t=s+t:t=`${s}/${t}`),window.open(t,"_blank","noopener,noreferrer")},q=l=>{switch(l){case"ENABLED":return"è¿è¡Œä¸­";case"LOADED":return"å·²åŠ è½½";case"DISABLED":return"å·²ç¦ç”¨";case"ERROR":return"é”™è¯¯";default:return l}};return Q(()=>{W(),B()}),(l,s)=>(i(),u("div",Se,[s[12]||(s[12]=e("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-blue-200/20 to-transparent rounded-full blur-3xl"}),e("div",{class:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-purple-200/20 to-transparent rounded-full blur-3xl"}),e("div",{class:"absolute top-1/4 left-1/3 w-96 h-96 bg-indigo-200/10 rounded-full blur-3xl"})],-1)),e("main",ze,[s[7]||(s[7]=e("div",{class:"text-center mb-12"},[e("h1",{class:"text-5xl sm:text-6xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-4 drop-shadow-sm"}," Funny Toolbox "),e("p",{class:"text-lg text-gray-600/80"},"ä¸€ä¸ªå¯æ‰©å±•çš„å·¥å…·å¹³å°")],-1)),e("div",Be,[e("div",Re,[n(a(me),{class:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"}),V(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),type:"text",placeholder:"æœç´¢ä½ éœ€è¦çš„å·¥å…·...",class:"w-full pl-12 pr-4 py-4 text-lg border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400/50 transition-all bg-white/60 backdrop-blur-md shadow-lg hover:shadow-xl hover:bg-white/70"},null,512),[[G,_.value]])])]),m.value?(i(),u("div",Ne,[...s[4]||(s[4]=[e("div",{class:"text-center bg-white/60 backdrop-blur-md rounded-2xl p-8 shadow-lg"},[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),e("p",{class:"text-gray-600"},"åŠ è½½ä¸­...")],-1)])])):h.value?(i(),L(a(oe),{key:1,variant:"destructive",class:"max-w-2xl mx-auto mb-8 bg-white/60 backdrop-blur-md border-0 shadow-lg"},{default:r(()=>[n(a(re),null,{default:r(()=>[d(v(h.value),1)]),_:1})]),_:1})):j.value.length===0?(i(),L(a(R),{key:2,class:"max-w-2xl mx-auto p-12 bg-white/60 backdrop-blur-md border-0 shadow-lg"},{default:r(()=>[e("div",Te,[e("p",Ve,v(_.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å·¥å…·":"æš‚æ— å¯ç”¨çš„æ’ä»¶"),1),_.value?T("",!0):(i(),u("p",Ae,[z.value?(i(),u(M,{key:0},[d(" è¯·å‰å¾€ç®¡ç†åŽå°ä¸Šä¼ æ’ä»¶ ")],64)):(i(),u(M,{key:1},[d(" è¯·è”ç³»ç®¡ç†å‘˜ä¸Šä¼ æ’ä»¶ ")],64))]))])]),_:1})):(i(),u("div",De,[(i(!0),u(M,null,K(j.value,t=>(i(),L(a(R),{key:t.id,class:"group hover:shadow-2xl transition-all duration-300 overflow-hidden border-0 bg-white/60 backdrop-blur-md hover:bg-white/70 hover:scale-[1.02]"},{default:r(()=>[n(a(ie),{class:"pb-3"},{default:r(()=>[e("div",Ue,[e("div",qe,[n(Pe,{icon:t.icon,alt:t.name},null,8,["icon","alt"])]),e("div",Oe,[e("div",He,[n(a(ce),{class:"text-lg font-semibold group-hover:text-blue-600 transition-colors line-clamp-2 leading-tight"},{default:r(()=>[d(v(t.name),1)]),_:2},1024),e("button",{onClick:b=>$(t.id,b),class:I(["flex-shrink-0 p-1.5 rounded-full transition-all duration-200 hover:bg-white/80 backdrop-blur-sm",y(t.id)?"text-yellow-500":"text-gray-400 hover:text-yellow-500"]),title:y(t.id)?"å–æ¶ˆæ”¶è—":"æ”¶è—"},[n(a(pe),{class:I([y(t.id)?"fill-current":"","h-4 w-4"])},null,8,["class"])],10,Je)]),e("div",Qe,[n(a(N),{variant:"outline",class:"text-xs bg-white/50 backdrop-blur-sm border-gray-300/50"},{default:r(()=>[d(" v"+v(t.version),1)]),_:2},1024),n(a(N),{variant:"default",class:"text-xs bg-blue-500/80 backdrop-blur-sm"},{default:r(()=>[d(v(q(t.status)),1)]),_:2},1024)])])])]),_:2},1024),n(a(ue),{class:"pb-3"},{default:r(()=>[n(a(de),{class:"line-clamp-3 text-sm min-h-[3.6rem] text-gray-600"},{default:r(()=>[d(v(t.description||"æš‚æ— æè¿°"),1)]),_:2},1024),e("div",Ge,[e("div",Ke,[e("span",Xe,"ä½œè€…: "+v(t.author),1)])])]),_:2},1024),n(a(fe),{class:"pt-0 pb-4 flex gap-2"},{default:r(()=>[n(a(C),{variant:"default",size:"sm",class:"flex-1 bg-blue-500/90 hover:bg-blue-600/90 backdrop-blur-sm shadow-md",onClick:b=>D(t),title:"åœ¨å¼¹çª—ä¸­æ‰“å¼€"},{default:r(()=>[n(a(ve),{class:"h-3.5 w-3.5 mr-1.5"}),s[5]||(s[5]=d(" å¼¹çª— ",-1))]),_:1},8,["onClick"]),n(a(C),{variant:"outline",size:"sm",class:"flex-1 bg-white/50 hover:bg-white/70 backdrop-blur-sm border-gray-300/50",onClick:b=>U(t),title:"åœ¨æ–°çª—å£ä¸­æ‰“å¼€"},{default:r(()=>[n(a(A),{class:"h-3.5 w-3.5 mr-1.5"}),s[6]||(s[6]=d(" æ–°çª—å£ ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]))]),n(Ce,{open:w.value,"onUpdate:open":s[1]||(s[1]=t=>w.value=t),plugin:k.value},null,8,["open","plugin"]),e("footer",Ye,[e("div",Ze,[e("div",et,[s[11]||(s[11]=e("div",{class:"text-sm text-gray-600"},[e("p",null,"Â© 2025 Funny Toolbox. ä¸€ä¸ªå¯æ‰©å±•çš„å·¥å…·å¹³å°.")],-1)),e("div",tt,[n(a(C),{variant:"ghost",size:"sm",onClick:B,title:"åˆ·æ–°",class:"text-gray-600 hover:text-gray-800 hover:bg-white/50 backdrop-blur-sm"},{default:r(()=>[n(a(ne),{class:"h-4 w-4 mr-1.5"}),s[8]||(s[8]=d(" åˆ·æ–° ",-1))]),_:1}),z.value?(i(),L(a(C),{key:0,variant:"ghost",size:"sm",onClick:s[2]||(s[2]=t=>a(o).push("/admin")),class:"text-gray-600 hover:text-gray-800 hover:bg-white/50 backdrop-blur-sm"},{default:r(()=>[n(a(he),{class:"h-4 w-4 mr-1.5"}),s[9]||(s[9]=d(" ç®¡ç† ",-1))]),_:1})):(i(),L(a(C),{key:1,variant:"ghost",size:"sm",onClick:s[3]||(s[3]=t=>a(o).push("/login")),class:"text-gray-600 hover:text-gray-800 hover:bg-white/50 backdrop-blur-sm"},{default:r(()=>[...s[10]||(s[10]=[d(" ç™»å½• ",-1)])]),_:1}))])])])])]))}}),it=S(st,[["__scopeId","data-v-73d4f393"]]);export{it as default};
