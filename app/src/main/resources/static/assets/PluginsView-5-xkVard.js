import{c as T,d as N,r as h,a as j,w as ee,b as x,e as i,u as a,f as o,g as t,h as v,t as p,i as c,j as C,k as J,v as te,o as n,n as I,l as se,m as ae,X as B,F as $,p as E,q as le,s as D}from"./index-DpY-5J94.js";import{g as ne,_ as W,a as V,b as O}from"./_plugin-vue_export-helper-C2sfx7YH.js";import{_ as oe,a as re,b as ie,c as ce,d as ue,g as de,e as fe,R as ve,f as M}from"./DialogTitle.vue_vue_type_script_setup_true_lang-laoNM0rr.js";import{_ as pe,a as ge,b as he,c as me,d as xe,e as be}from"./index-I0R7586e.js";const Q=T("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const _e=T("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);const ye=T("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const we=T("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ke=T("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),$e={class:"flex justify-between items-start"},Ce={class:"flex-1 pr-4"},Fe={class:"flex gap-2 flex-shrink-0"},Le={class:"flex-1 overflow-hidden"},We={key:0,class:"flex items-center justify-center h-[70vh] text-gray-500"},je={class:"h-full"},ze=["src","title"],Me={key:1,class:"flex items-center justify-center h-[70vh] text-gray-500"},Te=N({__name:"PluginModal",props:{plugin:{},open:{type:Boolean}},emits:["update:open"],setup(y,{emit:r}){const u=y,m=r,b=h(!1),F=h(null),L=j({get:()=>u.open,set:d=>m("update:open",d)});ee(()=>u.open,d=>{d&&g.value&&(b.value=!0)});const _=()=>{setTimeout(()=>{b.value=!1},100)},g=j(()=>{if(!u.plugin?.frontendEntry)return null;const d=ne();return u.plugin.frontendEntry.startsWith("http://")||u.plugin.frontendEntry.startsWith("https://")?u.plugin.frontendEntry:u.plugin.frontendEntry.startsWith("/")?d+u.plugin.frontendEntry:`${d}/${u.plugin.frontendEntry}`}),k=()=>{g.value&&(window.open(g.value,"_blank"),L.value=!1)};return(d,w)=>(n(),x(a(oe),{open:L.value,"onUpdate:open":w[0]||(w[0]=P=>L.value=P)},{default:i(()=>[o(a(ue),{class:"sm:max-w-[90vw] lg:max-w-[1400px] max-h-[90vh] p-0 overflow-hidden gap-0"},{default:i(()=>[o(a(re),{class:"px-6 pt-4 pb-3 pr-14 border-b flex-shrink-0"},{default:i(()=>[t("div",$e,[t("div",Ce,[o(a(ie),null,{default:i(()=>[v(p(y.plugin?.name),1)]),_:1}),o(a(ce),null,{default:i(()=>[v(p(y.plugin?.description),1)]),_:1})]),t("div",Fe,[o(a(W),{variant:"outline",size:"sm",onClick:k,title:"åœ¨æ–°çª—å£ä¸­æ‰“å¼€"},{default:i(()=>[o(a(Q),{class:"h-4 w-4"})]),_:1})])])]),_:1}),t("div",Le,[b.value?(n(),c("div",We,[...w[1]||(w[1]=[t("div",{class:"text-center"},[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mb-2"}),t("p",null,"åŠ è½½ä¸­...")],-1)])])):C("",!0),J(t("div",je,[g.value?(n(),c("iframe",{key:0,ref_key:"iframeRef",ref:F,src:g.value,class:"w-full h-[70vh] border-0 block",title:y.plugin?.name,onLoad:_},null,40,ze)):(n(),c("div",Me," æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢ "))],512),[[te,!b.value]])])]),_:1})]),_:1},8,["open"]))}}),Ee=V(Te,[["__scopeId","data-v-b50eb47b"]]),Ie={key:0,class:"inline-block text-inherit"},Pe={key:2,class:"material-icons"},Se=["innerHTML"],Ae=["src","alt"],Be={key:5,class:"inline-block"},Ne=N({__name:"PluginIcon",props:{icon:{default:""},alt:{default:"icon"},defaultIcon:{default:"ðŸ§°"}},setup(y){const r=y,u=j(()=>r.icon?r.icon.startsWith("fa:")?"fa":r.icon.startsWith("md:")?"md":r.icon.startsWith("svg:")||r.icon.startsWith("data:image/svg")?"svg":r.icon.startsWith("http://")||r.icon.startsWith("https://")||r.icon.startsWith("/")?"url":(r.icon.length<=4&&/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/u.test(r.icon),"emoji"):"default"),m=j(()=>r.icon?r.icon.startsWith("fa:")||r.icon.startsWith("md:")?r.icon.substring(3):r.icon.startsWith("svg:")?r.icon.substring(4):r.icon:r.defaultIcon);return(b,F)=>u.value==="emoji"?(n(),c("span",Ie,p(m.value),1)):u.value==="fa"?(n(),c("i",{key:1,class:I(m.value)},null,2)):u.value==="md"?(n(),c("i",Pe,p(m.value),1)):u.value==="svg"?(n(),c("span",{key:3,class:"inline-flex items-center justify-center w-16 h-16",innerHTML:m.value},null,8,Se)):u.value==="url"?(n(),c("img",{key:4,src:m.value,alt:y.alt,class:"inline-block w-16 h-16 object-contain"},null,8,Ae)):(n(),c("span",Be,p(y.defaultIcon),1))}}),Ve=V(Ne,[["__scopeId","data-v-28ad1f1f"]]),Re={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex flex-col relative overflow-hidden"},Ue={class:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 w-full relative z-10"},qe={class:"mb-6"},He={class:"flex items-center justify-between gap-4"},De={class:"w-full sm:w-auto sm:min-w-[280px] lg:min-w-[360px]"},Oe={class:"relative"},Je={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Qe={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},Xe={class:"mb-8"},Ge={class:"bg-white/60 backdrop-blur-md rounded-xl shadow p-3"},Ke={class:"flex flex-wrap items-center gap-2"},Ye={class:"flex items-center gap-1.5 text-gray-700"},Ze={key:2,class:"text-xs text-gray-400"},et={key:0,class:"flex justify-center items-center py-20"},tt={class:"text-center text-gray-500"},st={class:"text-lg mb-2"},at={key:0,class:"text-sm"},lt={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},nt=["onClick","title"],ot={class:"flex items-start gap-3"},rt={class:"flex-shrink-0 w-12 h-12 flex items-center justify-center text-4xl group-hover:scale-110 transition-transform bg-gradient-to-br from-blue-100/80 to-indigo-100/80 backdrop-blur-sm rounded-lg shadow-inner"},it={class:"flex-1 min-w-0"},ct={key:0,class:"mt-2 flex flex-wrap gap-1"},ut={class:"mt-2.5 flex items-center justify-between text-xs text-gray-500 flex-shrink-0"},dt={class:"truncate"},ft=["onClick"],vt={class:"mt-auto py-6 border-t border-white/30 bg-white/40 backdrop-blur-md flex-shrink-0 relative z-10 shadow-lg"},pt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},gt={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},ht={class:"flex items-center gap-3"},mt=N({__name:"PluginsView",setup(y){const r=le(),u=h([]),m=h(!1),b=h(""),F=h(!1),L=h(null),_=h(""),g=h(new Set),k=h([]),d=h(new Set),w=h(!1),P=()=>{try{const l=localStorage.getItem("plugin_favorites");l&&(g.value=new Set(JSON.parse(l)))}catch(l){console.error("åŠ è½½æ”¶è—å¤±è´¥:",l)}},X=()=>{try{localStorage.setItem("plugin_favorites",JSON.stringify(Array.from(g.value)))}catch(l){console.error("ä¿å­˜æ”¶è—å¤±è´¥:",l)}},G=(l,s)=>{s.stopPropagation(),g.value.has(l)?g.value.delete(l):g.value.add(l),X()},z=l=>g.value.has(l),R=async()=>{try{const l=await de();k.value=l.data.data||[]}catch(l){console.error("åŠ è½½æ ‡ç­¾å¤±è´¥:",l)}},U=l=>{d.value.has(l)?d.value.delete(l):d.value.add(l)},K=()=>{d.value.clear()},q=j(()=>localStorage.getItem("isAuthenticated")==="true"),S=j(()=>{const l=u.value.filter(e=>e.status==="ENABLED");let s=l;if(d.value.size>0&&(s=l.filter(e=>!e.tags||e.tags.length===0?!1:Array.from(d.value).some(f=>e.tags.includes(f)))),_.value.trim()){const e=_.value.toLowerCase();s=s.filter(f=>f.name.toLowerCase().includes(e)||f.description?.toLowerCase().includes(e)||f.author?.toLowerCase().includes(e)||f.tags?.some(A=>A.toLowerCase().includes(e)))}return s.sort((e,f)=>{const A=z(e.id)?1:0;return(z(f.id)?1:0)-A})}),H=async()=>{m.value=!0,b.value="";try{const l=await fe();u.value=l.data.data||[],await R(),console.log("åŠ è½½çš„æ’ä»¶åˆ—è¡¨:",u.value),console.log("å·²å¯ç”¨çš„æ’ä»¶:",S.value)}catch(l){b.value=l.message||"åŠ è½½æ’ä»¶åˆ—è¡¨å¤±è´¥",console.error("åŠ è½½æ’ä»¶å¤±è´¥:",l)}finally{m.value=!1}},Y=l=>{if(!l.frontendEntry){alert("æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢");return}L.value=l,F.value=!0},Z=l=>{if(!l.frontendEntry){alert("æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢");return}const s="";let e=l.frontendEntry;!e.startsWith("http://")&&!e.startsWith("https://")&&(e.startsWith("/")?e=s+e:e=`${s}/${e}`),window.open(e,"_blank","noopener,noreferrer")};return se(()=>{P(),H(),R()}),(l,s)=>(n(),c("div",Re,[s[16]||(s[16]=t("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[t("div",{class:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-blue-200/20 to-transparent rounded-full blur-3xl"}),t("div",{class:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-purple-200/20 to-transparent rounded-full blur-3xl"}),t("div",{class:"absolute top-1/4 left-1/3 w-96 h-96 bg-indigo-200/10 rounded-full blur-3xl"})],-1)),t("main",Ue,[t("div",qe,[t("div",He,[s[6]||(s[6]=t("div",{class:"flex-shrink-0"},[t("h1",{class:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent"}," Funny Toolbox ")],-1)),t("div",De,[t("div",Oe,[t("div",Je,[o(a(ye),{class:"h-4 w-4 text-gray-400"})]),J(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),type:"text",placeholder:"æœç´¢å·¥å…·...",class:"block w-full pl-10 pr-3 py-2 border border-gray-200 rounded-lg text-sm placeholder-gray-400 bg-white/80 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all hover:bg-white hover:shadow-sm"},null,512),[[ae,_.value]]),_.value?(n(),c("div",Qe,[t("button",{onClick:s[1]||(s[1]=e=>_.value=""),class:"text-gray-400 hover:text-gray-600 transition-colors"},[o(a(B),{class:"h-4 w-4"})])])):C("",!0)])])])]),t("div",Xe,[t("div",Ge,[t("div",Ke,[t("div",Ye,[o(a(_e),{class:"h-3.5 w-3.5"}),s[7]||(s[7]=t("span",{class:"text-xs font-medium"},"æ ‡ç­¾:",-1))]),d.value.size>0?(n(),c($,{key:0},[(n(!0),c($,null,E(Array.from(d.value),e=>(n(),x(a(M),{key:e,class:"px-2 py-0.5 text-xs cursor-pointer bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors",onClick:f=>U(e)},{default:i(()=>[v(p(e)+" ",1),o(a(B),{class:"h-3 w-3 ml-1"})]),_:2},1032,["onClick"]))),128)),o(a(W),{variant:"ghost",size:"sm",onClick:K,class:"text-xs h-6 px-2"},{default:i(()=>[o(a(B),{class:"h-3 w-3 mr-1"}),s[8]||(s[8]=v(" æ¸…é™¤ ",-1))]),_:1}),s[9]||(s[9]=t("div",{class:"w-px h-4 bg-gray-300"},null,-1))],64)):C("",!0),k.value.length>0?(n(),c($,{key:1},[(n(!0),c($,null,E(w.value?k.value:k.value.slice(0,8),e=>(n(),x(a(M),{key:e,variant:"outline",class:I(["px-2 py-0.5 text-xs cursor-pointer transition-all",d.value.has(e)?"hidden":"hover:bg-gray-50"]),onClick:f=>U(e)},{default:i(()=>[v(p(e),1)]),_:2},1032,["class","onClick"]))),128)),k.value.length>8?(n(),x(a(W),{key:0,variant:"ghost",size:"sm",onClick:s[2]||(s[2]=e=>w.value=!w.value),class:"text-xs h-6 px-2"},{default:i(()=>[v(p(w.value?"æ”¶èµ·":`æ›´å¤š (${k.value.length-8})`),1)]),_:1})):C("",!0)],64)):(n(),c("span",Ze,"æš‚æ— æ ‡ç­¾"))])])]),m.value?(n(),c("div",et,[...s[10]||(s[10]=[t("div",{class:"text-center bg-white/60 backdrop-blur-md rounded-2xl p-8 shadow-lg"},[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),t("p",{class:"text-gray-600"},"åŠ è½½ä¸­...")],-1)])])):b.value?(n(),x(a(pe),{key:1,variant:"destructive",class:"max-w-2xl mx-auto mb-8 bg-white/60 backdrop-blur-md border-0 shadow-lg"},{default:i(()=>[o(a(ge),null,{default:i(()=>[v(p(b.value),1)]),_:1})]),_:1})):S.value.length===0?(n(),x(a(O),{key:2,class:"max-w-2xl mx-auto p-12 bg-white/60 backdrop-blur-md border-0 shadow-lg"},{default:i(()=>[t("div",tt,[t("p",st,p(_.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å·¥å…·":"æš‚æ— å¯ç”¨çš„æ’ä»¶"),1),_.value?C("",!0):(n(),c("p",at,[q.value?(n(),c($,{key:0},[v(" è¯·å‰å¾€ç®¡ç†åŽå°ä¸Šä¼ æ’ä»¶ ")],64)):(n(),c($,{key:1},[v(" è¯·è”ç³»ç®¡ç†å‘˜ä¸Šä¼ æ’ä»¶ ")],64))]))])]),_:1})):(n(),c("div",lt,[(n(!0),c($,null,E(S.value,e=>(n(),x(a(O),{key:e.id,class:"group hover:shadow-2xl transition-all duration-300 overflow-hidden border-0 bg-white/60 backdrop-blur-md hover:bg-white/70 hover:scale-[1.02] cursor-pointer relative flex flex-col",onClick:f=>Y(e)},{default:i(()=>[t("button",{onClick:D(f=>G(e.id,f),["stop"]),class:I(["absolute top-3 right-3 z-10 p-1.5 rounded-full transition-all duration-200 hover:bg-white/80 backdrop-blur-sm",z(e.id)?"text-yellow-500":"text-gray-400 hover:text-yellow-500"]),title:z(e.id)?"å–æ¶ˆæ”¶è—":"æ”¶è—"},[o(a(ke),{class:I([z(e.id)?"fill-current":"","h-4 w-4"])},null,8,["class"])],10,nt),o(a(he),{class:"pb-0 pr-12"},{default:i(()=>[t("div",ot,[t("div",rt,[o(Ve,{icon:e.icon,alt:e.name},null,8,["icon","alt"])]),t("div",it,[o(a(me),{class:"text-base font-semibold group-hover:text-blue-600 transition-colors line-clamp-2 leading-tight mb-1"},{default:i(()=>[v(p(e.name),1)]),_:2},1024),o(a(M),{variant:"outline",class:"text-xs px-1.5 py-0 bg-white/50 backdrop-blur-sm border-gray-300/50"},{default:i(()=>[v(" v"+p(e.version),1)]),_:2},1024)])])]),_:2},1024),o(a(xe),{class:"pt-1.5 pb-3 flex-1 flex flex-col"},{default:i(()=>[o(a(be),{class:"line-clamp-3 text-sm text-gray-600 leading-relaxed flex-1"},{default:i(()=>[v(p(e.description||"æš‚æ— æè¿°"),1)]),_:2},1024),e.tags&&e.tags.length>0?(n(),c("div",ct,[(n(!0),c($,null,E(e.tags.slice(0,3),f=>(n(),x(a(M),{key:f,variant:"secondary",class:"text-xs px-2 py-0 bg-blue-100/80 text-blue-700"},{default:i(()=>[v(p(f),1)]),_:2},1024))),128)),e.tags.length>3?(n(),x(a(M),{key:0,variant:"secondary",class:"text-xs px-2 py-0 bg-gray-100/80 text-gray-600"},{default:i(()=>[v(" +"+p(e.tags.length-3),1)]),_:2},1024)):C("",!0)])):C("",!0),t("div",ut,[t("span",dt,p(e.author),1),t("button",{onClick:D(f=>Z(e),["stop"]),class:"flex items-center gap-1 px-2 py-1 rounded-md text-blue-500 hover:text-blue-600 hover:bg-blue-50/80 transition-all duration-200 group/link",title:"åœ¨æ–°çª—å£ä¸­æ‰“å¼€"},[o(a(Q),{class:"h-3.5 w-3.5 group-hover/link:scale-110 transition-transform"}),s[11]||(s[11]=t("span",{class:"text-xs font-medium"},"æ–°çª—å£",-1))],8,ft)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]))]),o(Ee,{open:F.value,"onUpdate:open":s[3]||(s[3]=e=>F.value=e),plugin:L.value},null,8,["open","plugin"]),t("footer",vt,[t("div",pt,[t("div",gt,[s[15]||(s[15]=t("div",{class:"text-sm text-gray-600"},[t("p",null,"Â© 2025 Funny Toolbox. ä¸€ä¸ªå¯æ‰©å±•çš„å·¥å…·å¹³å°.")],-1)),t("div",ht,[o(a(W),{variant:"ghost",size:"sm",onClick:H,title:"åˆ·æ–°",class:"text-gray-600 hover:text-gray-800 hover:bg-white/50 backdrop-blur-sm"},{default:i(()=>[o(a(ve),{class:"h-4 w-4 mr-1.5"}),s[12]||(s[12]=v(" åˆ·æ–° ",-1))]),_:1}),q.value?(n(),x(a(W),{key:0,variant:"ghost",size:"sm",onClick:s[4]||(s[4]=e=>a(r).push("/admin")),class:"text-gray-600 hover:text-gray-800 hover:bg-white/50 backdrop-blur-sm"},{default:i(()=>[o(a(we),{class:"h-4 w-4 mr-1.5"}),s[13]||(s[13]=v(" ç®¡ç† ",-1))]),_:1})):(n(),x(a(W),{key:1,variant:"ghost",size:"sm",onClick:s[5]||(s[5]=e=>a(r).push("/login")),class:"text-gray-600 hover:text-gray-800 hover:bg-white/50 backdrop-blur-sm"},{default:i(()=>[...s[14]||(s[14]=[v(" ç™»å½• ",-1)])]),_:1}))])])])])]))}}),kt=V(mt,[["__scopeId","data-v-3aa23c02"]]);export{kt as default};
