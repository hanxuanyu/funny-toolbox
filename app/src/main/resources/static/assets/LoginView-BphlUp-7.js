import{d as V,b as h,o as m,e as i,x as E,y as P,u as e,z as M,r as $,w as k,a as O,A as T,k as U,m as J,i as w,n as R,B as F,C as j,D as z,f as u,h as v,g as y,j as A,t as G,E as H,p as K,G as Q}from"./index-dncQmnLB.js";import{l as W}from"./auth-BFT6Wqoc.js";import{u as X,P as Y,i as Z,r as ee,c as te,d as se,b as ae,_ as le,a as oe}from"./_plugin-vue_export-helper-DER20O5o.js";import{_ as re,a as ne,b as ie,c as de,d as ue}from"./CardTitle.vue_vue_type_script_setup_true_lang-Db8GWiQY.js";var ce=V({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(l){const a=l;return X(),(c,o)=>(m(),h(e(Y),P(a,{onMousedown:o[0]||(o[0]=t=>{!t.defaultPrevented&&t.detail>1&&t.preventDefault()})}),{default:i(()=>[E(c.$slots,"default")]),_:3},16))}}),fe=ce;function pe(l){return JSON.parse(JSON.stringify(l))}function me(l,a,c,o={}){var t,d;const{clone:f=!1,passive:p=!1,eventName:s,deep:_=!1,defaultValue:I,shouldEmit:S}=o,r=M(),C=c||r?.emit||(r==null||(t=r.$emit)===null||t===void 0?void 0:t.bind(r))||(r==null||(d=r.proxy)===null||d===void 0||(d=d.$emit)===null||d===void 0?void 0:d.bind(r?.proxy));let g=s;g=g||`update:${a.toString()}`;const N=n=>f?typeof f=="function"?f(n):pe(n):n,B=()=>Z(l[a])?N(l[a]):I,L=n=>{S?S(n)&&C(g,n):C(g,n)};if(p){const n=$(B());let b=!1;return k(()=>l[a],x=>{b||(b=!0,n.value=N(x),T(()=>b=!1))}),k(n,x=>{!b&&(x!==l[a]||_)&&L(x)},{deep:_}),n}else return O({get(){return B()},set(n){L(n)}})}const q=V({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(l,{emit:a}){const c=l,t=me(c,"modelValue",a,{passive:!0,defaultValue:c.defaultValue});return(d,f)=>U((m(),w("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>j(t)?t.value=p:null),"data-slot":"input",class:R(e(F)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",c.class))},null,2)),[[J,e(t)]])}}),D=V({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,c=ee(a,"class");return(o,t)=>(m(),h(e(fe),P({"data-slot":"label"},e(c),{class:e(F)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a.class)}),{default:i(()=>[E(o.$slots,"default")]),_:3},16,["class"]))}}),_e={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 sm:px-6 lg:px-8"},ve={class:"space-y-2"},ge={class:"space-y-2"},be={key:0},xe={key:1},ye=V({__name:"LoginView",setup(l){const a=K(),c=Q(),o=z({username:"",password:""}),t=$(!1),d=$(""),f=async()=>{d.value="",t.value=!0;try{await W(o),localStorage.setItem("isAuthenticated","true");const p=c.query.redirect||"/admin";a.push(p)}catch(p){d.value=p.message||"登录失败，请检查用户名和密码"}finally{t.value=!1}};return(p,s)=>(m(),w("div",_e,[u(e(te),{class:"w-full max-w-md shadow-xl"},{default:i(()=>[u(e(re),{class:"space-y-1"},{default:i(()=>[u(e(ne),{class:"text-2xl font-bold text-center"},{default:i(()=>[...s[2]||(s[2]=[v("Funny Toolbox",-1)])]),_:1}),u(e(ie),{class:"text-center"},{default:i(()=>[...s[3]||(s[3]=[v(" 登录后台管理系统 ",-1)])]),_:1})]),_:1}),u(e(de),null,{default:i(()=>[y("form",{onSubmit:H(f,["prevent"]),class:"space-y-4"},[y("div",ve,[u(e(D),{for:"username"},{default:i(()=>[...s[4]||(s[4]=[v("用户名",-1)])]),_:1}),u(e(q),{id:"username",modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=_=>o.username=_),type:"text",placeholder:"请输入用户名",required:"",autocomplete:"username"},null,8,["modelValue"])]),y("div",ge,[u(e(D),{for:"password"},{default:i(()=>[...s[5]||(s[5]=[v("密码",-1)])]),_:1}),u(e(q),{id:"password",modelValue:o.password,"onUpdate:modelValue":s[1]||(s[1]=_=>o.password=_),type:"password",placeholder:"请输入密码",required:"",autocomplete:"current-password"},null,8,["modelValue"])]),d.value?(m(),h(e(ae),{key:0,variant:"destructive"},{default:i(()=>[u(e(se),null,{default:i(()=>[v(G(d.value),1)]),_:1})]),_:1})):A("",!0),u(e(le),{type:"submit",class:"w-full",disabled:t.value},{default:i(()=>[t.value?(m(),w("span",be,"登录中...")):(m(),w("span",xe,"登录"))]),_:1},8,["disabled"])],32)]),_:1}),u(e(ue),{class:"text-center text-sm text-gray-500"},{default:i(()=>[...s[6]||(s[6]=[y("p",{class:"w-full"},"登录后可管理平台插件",-1)])]),_:1})]),_:1})]))}}),Se=oe(ye,[["__scopeId","data-v-7a14cd2f"]]);export{Se as default};
