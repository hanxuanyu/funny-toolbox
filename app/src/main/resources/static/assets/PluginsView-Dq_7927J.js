import{c as j,d as B,r as g,a as C,w as q,b as L,e as i,u as s,f as o,g as e,h as d,t as v,i as u,j as A,k as D,v as O,o as r,n as P,l as H,m as J,p as Q,F as I,q as G,s as K}from"./index-dncQmnLB.js";import{g as X,_ as E,a as M,b as Y,c as N,d as Z}from"./_plugin-vue_export-helper-DER20O5o.js";import{_ as ee,a as te,b as se,c as ae,d as ne,g as le,R as oe,e as V}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DGdUbv8h.js";import{_ as ie,a as re,b as ce,c as ue,d as de}from"./CardTitle.vue_vue_type_script_setup_true_lang-Db8GWiQY.js";const fe=j("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const ve=j("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const me=j("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const pe=j("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),_e={class:"flex justify-between items-start"},xe={class:"flex-1 pr-4"},he={class:"flex gap-2 flex-shrink-0"},ge={class:"flex-1 overflow-auto custom-scrollbar"},ye={key:0,class:"flex items-center justify-center h-[70vh] text-gray-500"},be={class:"relative"},ke=["src","title"],we={key:1,class:"flex items-center justify-center h-[70vh] text-gray-500"},$e=B({__name:"PluginModal",props:{plugin:{},open:{type:Boolean}},emits:["update:open"],setup(_,{emit:l}){const c=_,m=l,p=g(!1),k=g(null),w=C({get:()=>c.open,set:x=>m("update:open",x)});q(()=>c.open,x=>{x&&f.value&&(p.value=!0)});const y=()=>{setTimeout(()=>{p.value=!1},100)},f=C(()=>{if(!c.plugin?.frontendEntry)return null;const x=X();return c.plugin.frontendEntry.startsWith("http://")||c.plugin.frontendEntry.startsWith("https://")?c.plugin.frontendEntry:c.plugin.frontendEntry.startsWith("/")?x+c.plugin.frontendEntry:`${x}/${c.plugin.frontendEntry}`}),S=()=>{f.value&&(window.open(f.value,"_blank"),w.value=!1)};return(x,$)=>(r(),L(s(ee),{open:w.value,"onUpdate:open":$[0]||($[0]=b=>w.value=b)},{default:i(()=>[o(s(ne),{class:"sm:max-w-[90vw] lg:max-w-[1400px] max-h-[90vh] p-0 overflow-hidden"},{default:i(()=>[o(s(te),{class:"px-6 pt-6 pb-4 pr-14 border-b flex-shrink-0"},{default:i(()=>[e("div",_e,[e("div",xe,[o(s(se),null,{default:i(()=>[d(v(_.plugin?.name),1)]),_:1}),o(s(ae),null,{default:i(()=>[d(v(_.plugin?.description),1)]),_:1})]),e("div",he,[o(s(E),{variant:"outline",size:"sm",onClick:S,title:"åœ¨æ–°çª—å£ä¸­æ‰“å¼€"},{default:i(()=>[o(s(fe),{class:"h-4 w-4"})]),_:1})])])]),_:1}),e("div",ge,[p.value?(r(),u("div",ye,[...$[1]||($[1]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mb-2"}),e("p",null,"åŠ è½½ä¸­...")],-1)])])):A("",!0),D(e("div",be,[f.value?(r(),u("iframe",{key:0,ref_key:"iframeRef",ref:k,src:f.value,class:"w-full h-[70vh] border-0",title:_.plugin?.name,onLoad:y},null,40,ke)):(r(),u("div",we," æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢ "))],512),[[O,!p.value]])])]),_:1})]),_:1},8,["open"]))}}),Le=M($e,[["__scopeId","data-v-8aed6fb7"]]),Ce={key:0,class:"inline-block text-inherit"},Ee={key:2,class:"material-icons"},Fe=["innerHTML"],je=["src","alt"],Se={key:5,class:"inline-block"},We=B({__name:"PluginIcon",props:{icon:{default:""},alt:{default:"icon"},defaultIcon:{default:"ğŸ§°"}},setup(_){const l=_,c=C(()=>l.icon?l.icon.startsWith("fa:")?"fa":l.icon.startsWith("md:")?"md":l.icon.startsWith("svg:")||l.icon.startsWith("data:image/svg")?"svg":l.icon.startsWith("http://")||l.icon.startsWith("https://")||l.icon.startsWith("/")?"url":(l.icon.length<=4&&/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/u.test(l.icon),"emoji"):"default"),m=C(()=>l.icon?l.icon.startsWith("fa:")||l.icon.startsWith("md:")?l.icon.substring(3):l.icon.startsWith("svg:")?l.icon.substring(4):l.icon:l.defaultIcon);return(p,k)=>c.value==="emoji"?(r(),u("span",Ce,v(m.value),1)):c.value==="fa"?(r(),u("i",{key:1,class:P(m.value)},null,2)):c.value==="md"?(r(),u("i",Ee,v(m.value),1)):c.value==="svg"?(r(),u("span",{key:3,innerHTML:m.value},null,8,Fe)):c.value==="url"?(r(),u("img",{key:4,src:m.value,alt:_.alt,class:"inline-block w-6 h-6 object-contain"},null,8,je)):(r(),u("span",Se,v(_.defaultIcon),1))}}),Ie=M(We,[["__scopeId","data-v-b5aa9741"]]),Pe={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex flex-col"},Be={class:"bg-white/80 backdrop-blur-sm shadow-sm border-b sticky top-0 z-10"},Me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Re={class:"flex justify-between items-center gap-4"},ze={class:"flex-1 max-w-md"},Ne={class:"relative"},Ve={class:"flex items-center space-x-2 sm:space-x-4"},Ae={class:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 w-full"},De={key:0,class:"flex justify-center items-center py-20"},Te={class:"text-center text-gray-500"},Ue={class:"text-lg mb-2"},qe={key:0,class:"text-sm"},Oe={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},He={class:"flex items-start justify-between gap-3"},Je={class:"text-4xl flex-shrink-0 group-hover:scale-110 transition-transform"},Qe={class:"flex-1 min-w-0"},Ge=["onClick","title"],Ke={class:"flex items-center justify-between text-sm text-gray-500"},Xe={class:"flex items-center space-x-2"},Ye={class:"text-xs"},Ze=B({__name:"PluginsView",setup(_){const l=Q(),c=g([]),m=g(!1),p=g(""),k=g(!1),w=g(null),y=g(""),f=g(new Set),S=()=>{try{const a=localStorage.getItem("plugin_favorites");a&&(f.value=new Set(JSON.parse(a)))}catch(a){console.error("åŠ è½½æ”¶è—å¤±è´¥:",a)}},x=()=>{try{localStorage.setItem("plugin_favorites",JSON.stringify(Array.from(f.value)))}catch(a){console.error("ä¿å­˜æ”¶è—å¤±è´¥:",a)}},$=(a,t)=>{t.stopPropagation(),f.value.has(a)?f.value.delete(a):f.value.add(a),x()},b=a=>f.value.has(a),R=C(()=>localStorage.getItem("isAuthenticated")==="true"),W=C(()=>{const a=c.value.filter(h=>h.status==="ENABLED");let t=a;if(y.value.trim()){const h=y.value.toLowerCase();t=a.filter(n=>n.name.toLowerCase().includes(h)||n.description?.toLowerCase().includes(h)||n.author?.toLowerCase().includes(h))}return t.sort((h,n)=>{const F=b(h.id)?1:0;return(b(n.id)?1:0)-F})}),z=async()=>{m.value=!0,p.value="";try{const a=await le();c.value=a.data.data||[],console.log("åŠ è½½çš„æ’ä»¶åˆ—è¡¨:",c.value),console.log("å·²å¯ç”¨çš„æ’ä»¶:",W.value)}catch(a){p.value=a.message||"åŠ è½½æ’ä»¶åˆ—è¡¨å¤±è´¥",console.error("åŠ è½½æ’ä»¶å¤±è´¥:",a)}finally{m.value=!1}},T=a=>{if(!a.frontendEntry){alert("æ­¤æ’ä»¶æš‚æ— å‰ç«¯é¡µé¢");return}w.value=a,k.value=!0},U=a=>{switch(a){case"ENABLED":return"è¿è¡Œä¸­";case"LOADED":return"å·²åŠ è½½";case"DISABLED":return"å·²ç¦ç”¨";case"ERROR":return"é”™è¯¯";default:return a}};return H(()=>{S(),z()}),(a,t)=>{const h=K("router-link");return r(),u("div",Pe,[e("header",Be,[e("div",Me,[e("div",Re,[e("div",ze,[e("div",Ne,[o(s(ve),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>y.value=n),type:"text",placeholder:"æœç´¢å·¥å…·...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[J,y.value]])])]),e("div",Ve,[o(s(E),{variant:"outline",size:"sm",onClick:z,title:"åˆ·æ–°"},{default:i(()=>[o(s(oe),{class:"h-4 w-4 sm:mr-2"}),t[4]||(t[4]=e("span",{class:"hidden sm:inline"},"åˆ·æ–°",-1))]),_:1}),R.value?(r(),L(s(E),{key:0,variant:"default",size:"sm",onClick:t[1]||(t[1]=n=>s(l).push("/admin"))},{default:i(()=>[o(s(me),{class:"h-4 w-4 sm:mr-2"}),t[5]||(t[5]=e("span",{class:"hidden sm:inline"},"ç®¡ç†åå°",-1))]),_:1})):(r(),L(s(E),{key:1,variant:"outline",size:"sm",onClick:t[2]||(t[2]=n=>s(l).push("/login"))},{default:i(()=>[...t[6]||(t[6]=[d(" ç™»å½• ",-1)])]),_:1}))])])])]),e("main",Ae,[m.value?(r(),u("div",De,[...t[7]||(t[7]=[e("div",{class:"text-gray-500"},"åŠ è½½ä¸­...",-1)])])):p.value?(r(),L(s(Y),{key:1,variant:"destructive",class:"max-w-2xl mx-auto mb-8"},{default:i(()=>[o(s(Z),null,{default:i(()=>[d(v(p.value),1)]),_:1})]),_:1})):W.value.length===0?(r(),L(s(N),{key:2,class:"max-w-2xl mx-auto p-12"},{default:i(()=>[e("div",Te,[e("p",Ue,v(y.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å·¥å…·":"æš‚æ— å¯ç”¨çš„æ’ä»¶"),1),y.value?A("",!0):(r(),u("p",qe,[R.value?(r(),u(I,{key:0},[t[9]||(t[9]=d(" è¯·å‰å¾€",-1)),o(h,{to:"/admin",class:"text-blue-600 hover:underline"},{default:i(()=>[...t[8]||(t[8]=[d("ç®¡ç†åå°",-1)])]),_:1}),t[10]||(t[10]=d("ä¸Šä¼ æ’ä»¶ ",-1))],64)):(r(),u(I,{key:1},[d(" è¯·è”ç³»ç®¡ç†å‘˜ä¸Šä¼ æ’ä»¶ ")],64))]))])]),_:1})):(r(),u("div",Oe,[(r(!0),u(I,null,G(W.value,n=>(r(),L(s(N),{key:n.id,class:"group hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden",onClick:F=>T(n)},{default:i(()=>[o(s(ie),{class:"pb-4"},{default:i(()=>[e("div",He,[e("div",Je,[o(Ie,{icon:n.icon,alt:n.name},null,8,["icon","alt"])]),e("div",Qe,[o(s(re),{class:"group-hover:text-blue-600 transition-colors"},{default:i(()=>[d(v(n.name),1)]),_:2},1024),o(s(ce),{class:"mt-2 line-clamp-2"},{default:i(()=>[d(v(n.description||"æš‚æ— æè¿°"),1)]),_:2},1024)]),e("button",{onClick:F=>$(n.id,F),class:P(["flex-shrink-0 p-1.5 rounded-full transition-all duration-200 hover:bg-gray-100",b(n.id)?"text-yellow-500":"text-gray-400 hover:text-yellow-500"]),title:b(n.id)?"å–æ¶ˆæ”¶è—":"æ”¶è—"},[o(s(pe),{class:P([b(n.id)?"fill-current":"","h-5 w-5"])},null,8,["class"])],10,Ge)])]),_:2},1024),o(s(ue),null,{default:i(()=>[e("div",Ke,[e("div",Xe,[o(s(V),{variant:"outline",class:"text-xs"},{default:i(()=>[d(" v"+v(n.version),1)]),_:2},1024),o(s(V),{variant:"default",class:"text-xs"},{default:i(()=>[d(v(U(n.status)),1)]),_:2},1024)]),e("span",Ye,v(n.author),1)])]),_:2},1024),o(s(de),{class:"pt-0"},{default:i(()=>[o(s(E),{variant:"ghost",size:"sm",class:"w-full group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors"},{default:i(()=>[...t[11]||(t[11]=[d(" æ‰“å¼€å·¥å…· ",-1)])]),_:1})]),_:1})]),_:2},1032,["onClick"]))),128))]))]),o(Le,{open:k.value,"onUpdate:open":t[3]||(t[3]=n=>k.value=n),plugin:w.value},null,8,["open","plugin"]),t[12]||(t[12]=e("footer",{class:"mt-auto py-8 border-t bg-white/50 backdrop-blur-sm flex-shrink-0"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[e("div",{class:"text-center text-sm text-gray-500"},[e("p",null,"Â© 2025 Funny Toolbox. ä¸€ä¸ªå¯æ‰©å±•çš„å·¥å…·å¹³å°.")])])],-1))])}}}),lt=M(Ze,[["__scopeId","data-v-0731567d"]]);export{lt as default};
